# 13~18강

JWT 사전 지식 설명 정리

## 세션 - 12

사용자가 웹 브라우저를 킨다.

`www.naver.com`을 주소창에 적는다.

서버에서 해당주소에 해당하는 컨트롤러를 찾고 .html파일 리턴

이때 http 헤더를 달아준다.

헤더에 쿠키를 만들어서 세션아이디를 넣는다.

최초에 세션아이디를 넣어주는것이다. 재요청시에는 헤더에 세션ID가 이미 존재하기 때문에 세션ID를 그대로 돌려준다.

세션아이디가 사라지는 경우는 서버에서 세션값을 날린 경우, 사용자가 브라우저를 종료한 경우, 설정한 시간이 흐른 경우가 있다. 

<br>
<br>

### 로드 밸런싱 - 12

<p align="center"><img src="./imgs/로드밸런싱1.jpg"width="300"></p>

만약 서버가 100명의 동시 접속자를 수용할 수 있는데 300명이 접속한다면 100명이 접속하고 나머지 200명은 기다려야 한다. 이 상황을 해결하기 위해 다음과 같이 100명을 수용할 수 있는 서버를 3개를 두는 것이다.

<p align="center"><img src="./imgs/로드밸런싱2.jpg"width="300"></p>

하나의 서버에 몰리면 다른 서버로 가고... 이렇게 만들면 부하가 안걸릴 것이다. 이렇게 만드는 것을 '**로드 밸런싱**'이라 부른다.

<br>

근데 서버의 로그인을 세션으로 관리한다고 생각해보자. 클라이언트가 중간에 서버로 로그인을 했는데 가장 상단 서버가 엄청 바쁘다면 다른 서버를 사용할 것이다. 하지만 세션으로 로그인을 관리하는데 다른 서버에는 로그인 정보가 세션에 없다.

<p align="center"><img src="./imgs/로드밸런싱3.jpg"width="300"></p>

저 3개의 서버는 세션을 공유할 방법을 찾아야 한다.

DB에 세션의 데이터를 저장하고 3개의 서버에서 공유를 하는 방법이 있다. 하지만 DB는 하드디스크를 뒤져서 세션값을 찾아야 한다. 기존 세션이 서버에 메모리에서 세션값을 가져오는데 반해 하드에 접근하는 것은 매우 느리다.

<br>

그래서 보통은 메모리 공유 서버를 사용한다. 메모리 공유서버는 하드는 없고 RAM만 존재한다. 대표적인 메모리 공유 서버는 **Redis**가 있다.

<p align="center"><img src="./imgs/로드밸런싱4.jpg"width="500"></p>




